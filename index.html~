<!DOCTYPE html> 
<html>

  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1"> 
    <title>MealMates!</title> 
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.css" />
    <link rel="stylesheet" href="style.css" />
    <script src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
    <script src="http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.js"></script>
    <script>
      $(function() {

        function touchHandler(event)
        {
          var touches = event.changedTouches,
          first = touches[0],
          type = "";

          switch(event.type)
          {
            case "touchstart": type = "mousedown"; break;
            case "touchmove":  type="mousemove"; break;        
            case "touchend":   type="mouseup"; break;
            default: return;
          }

          // initMouseEvent(type, canBubble, cancelable, view, clickCount,
          //                screenX, screenY, clientX, clientY, ctrlKey,
          //                altKey, shiftKey, metaKey, button, relatedTarget);

          var simulatedEvent = document.createEvent("MouseEvent");
          simulatedEvent.initMouseEvent(type, true, true, window, 1,
          first.screenX, first.screenY,
          first.clientX, first.clientY, false,
          false, false, false, 0, null);

          first.target.dispatchEvent(simulatedEvent);
          event.preventDefault();
        }

        function init()
        {
          document.getElementsByClassName('drag-page')[0].addEventListener("touchstart", touchHandler, true);
          document.getElementsByClassName('drag-page')[1].addEventListener("touchstart", touchHandler, true);
          //$('.drag-page').addEventListener("touchmove", touchHandler, true);
          //$('.drag-page').addEventListener("touchend", touchHandler, true);
          //$('.drag-page').addEventListener("touchcancel", touchHandler, true);    
        }
        init();
        $(".draggable").draggable({
          revert: true,
          zIndex: 10,
        });
        $(".droppable").droppable({
          activeClass: "draggable",
          drop: handleDroppable,
        });
        $(".rankDrop").droppable({
          activeClass: "draggable",
          drop: handleRankDrop,
        });

        function handleDroppable(event, ui) {
          console.log(this);
          $(this).append(ui.draggable);
          ui.draggable.draggable( 'option', 'revert', false );
          ui.draggable.css({'position':'static'});
        }

        function handleRankDrop(event, ui) {
          console.log(this);
          $(this).droppable( 'disable' );
          $(this).append(ui.draggable);
          ui.draggable.draggable( 'option', 'revert', false );
          ui.draggable.css({position:'static'});
        }
        $('#calendar-input').datepicker();
        $('.am-pm-toggle').click(function() {
          if($(this).text() == 'AM') {
            $(this).html('PM');
          }
          else {
            $(this).html('AM');
          }
        });
        $('#confirm-meal-button').click(function() {
          alert('Success! Your invitations have been sent.');
        });
        $('#cancel-meal').click(function() {
          alert('Your meal "Family Dinner" has been cancelled.  Everyone you invited will be notified of the cancellation');
        });

      });
    </script>
  </head> 


  <body> 

    <!-- Start of first page: #one -->
    <div data-role="page" id="welcome">

      <div data-role="header">
        <h1>Hi, Justin!</h1>
      </div><!-- /header -->

      <div data-role="content" >  
        <h2>Upcoming Meals</h2>
        <div class="day-container">
          <h3>Wednesday, May 16</h3>
          <div class="meal-container">
            <div class="restaurant-button-container"><a class="restaurant-button" href="#" data-role="button" data-inline="true">Cafeteria</a></div>
            <span class="time-window">at <strong>7:00pm</strong></span>
          </div>  
        </div>
      </div><!-- /content -->

      <div data-role="footer" data-position="fixed">
        <a id="create-button" href="#what" data-role="button">Create a New Meal</a>
        <h1>MealMates</h1>
      </div>
    </div><!-- /page one -->


    <!-- Start of second page: #two -->
    <div data-role="page" id="two" data-theme="a">

      <div data-role="header">
        <h1>Two</h1>
      </div><!-- /header -->

      <div data-role="content" data-theme="a">  
        <h2>Two</h2>
        <p>I have an id of "two" on my page container. I'm the second page container in this multi-page template.</p>  
        <p>Notice that the theme is different for this page because we've added a few <code>data-theme</code> swatch assigments here to show off how flexible it is. You can add any content or widget to these pages, but we're keeping these simple.</p>  
        <p><a href="#one" data-direction="reverse" data-role="button" data-theme="b">Back to page "one"</a></p>  

      </div><!-- /content -->

      <div data-role="footer">
        <h4>Page Footer</h4>
      </div><!-- /footer -->
    </div><!-- /page two -->


    <!-- Start of third page: #popup -->
    <div data-role="page" id="popup">

      <div data-role="header" data-theme="e">
        <h1>Dialog</h1>
      </div><!-- /header -->

      <div data-role="content" data-theme="d">  
        <h2>Popup</h2>
        <p>I have an id of "popup" on my page container and only look like a dialog because the link to me had a <code>data-rel="dialog"</code> attribute which gives me this inset look and a <code>data-transition="pop"</code> attribute to change the transition to pop. Without this, I'd be styled as a normal page.</p>    
        <p><a href="#one" data-rel="back" data-role="button" data-inline="true" data-icon="back">Back to page "one"</a></p>  
      </div><!-- /content -->

      <div data-role="footer">
        <h4>Page Footer</h4>
      </div><!-- /footer -->
    </div><!-- /page popup -->

<div data-role="page" id="When">
      <div data-role="content">
        <div data-role="navbar" data-iconpos="top">
          <ul>
            <li>
            <a href="When" data-theme="" data-icon="" class="ui-btn-active">
              When
            </a>
            </li>
            <li>
            <a href="#Where" data-theme="" data-icon="">
              Where
            </a>
            </li>
            <li>
            <a href="#Who" data-theme="" data-icon="">
              Who
            </a>
            </li>
            <li>
            <a href="#Confirm" data-theme="" data-icon="">
              Confirm
            </a>
            </li>
          </ul>
        </div>
        <h1 id="select-time-header">
          Select a date and times that work for you:
        </h1>
        <div data-role="fieldcontain">
          <fieldset data-role="controlgroup">
            <input id="calendar-input" class="time-number" placeholder="Enter a date..." value="" type="text" />
          </fieldset>
        </div>
        <h2 id="available-header">
          I'm available from:
        </h2>
        <table id="time-table">
          <tr>
            <td>
              <div data-role="fieldcontain">
                <fieldset data-role="controlgroup" class="time-number">
                  <input id="textinput6" class="time-number" placeholder="HH" value="" type="number" />
                </fieldset>
              </div>
            </td>
            <td class="grammar-colon">
              :
            </td>
            <td>
              <div data-role="fieldcontain">
                <fieldset data-role="controlgroup" class="time-number">
                  <input id="textinput7" class="time-number" placeholder="MM" value="" type="number" />
                </fieldset>
              </div>
            </td>
            <td>
              <a data-role="button" data-transition="fade" class="am-pm-toggle">
                AM
              </a>
            </td>
          </tr>

          <tr>
            to:
          </tr>

          <tr>
            <td>
              <div data-role="fieldcontain">
                <fieldset data-role="controlgroup" class="time-number">
                  <input id="textinput6" placeholder="HH" value="" type="number" />
                </fieldset>
              </div>
            </td>
            <td class="grammar-colon">
              :
            </td>
            <td>
              <div data-role="fieldcontain">
                <fieldset data-role="controlgroup" class="time-number">
                  <input id="textinput7" class="time-number" placeholder="MM" value="" type="number" />
                </fieldset>
              </div>
            </td>
            <td>
              <a data-role="button" data-transition="fade" class="am-pm-toggle">
                AM
              </a>
            </td>
          </tr>

        </table>
        <a data-role="button" data-transition="fade" href="#page10">
          Add another time
        </a>
      </div>
    </div>

    <div data-role="page" id="Where">
      <div data-role="content">
        <div data-role="navbar" data-iconpos="top">
          <ul>
            <li>
            <a href="#When"  data-theme="" data-icon="">
              When
            </a>
            </li>
            <li>
            <a href="#Where"  data-theme="" data-icon="" class="ui-btn-active">
              Where
            </a>
            </li>
            <li>
            <a href="#Who"  data-theme="" data-icon="">
              Who
            </a>
            </li>
            <li>
            <a href="#Confirm"  data-theme="" data-icon="">
              Confirm
            </a>
            </li>
          </ul>
        </div>
 	<div class="ui-grid-a">
          <div class="ui-block-a">
            <div data-role="fieldcontain">
              <fieldset data-role="controlgroup">
                <input id="textinput11" placeholder="" value="" type="text" />
              </fieldset>
            </div>
          </div>
          <div class="ui-block-b">
            <a data-role="button" data-transition="fade" href="#page6">
              Search
            </a>
          </div>
        </div>
        <div class="ui-grid-a">
          <div class="ui-block-a">
            <div>
              <b>
                Places to be added
              </b>
            </div>
          </div>
          <div class="ui-block-b">
            <div>
              <b>
                Rank your choices
              </b>
            </div>
          </div>
          <div class="ui-block-a">
            <!--
            <a data-role="button" data-transition="fade" href="#page6">
              Popeyes
            </a>
            <a data-role="button" data-transition="fade" href="#page6">
              Toscanini's
            </a>
            -->
          </div>
          <div class="ui-block-b">
            <div>
              <b>
	           <div class="numberList">	      
			   1.
		   </div>
		   <div class="numberList">	      
			   2.
		   </div>
		   <div class="numberList">	      
			   3.
		   </div>
		   <div class="numberList">	      
			   4.
		   </div>
		   <div class="numberList">	      
			   5.
		   </div>
              </b>
      	    </div>
	    <button id="addMoreRestaurants">
		    Rank more restaurants
	    </button>
          </div>
        </div>
      </div>
      </div>
    </div>

  </body>
</html>
